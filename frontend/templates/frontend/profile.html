{% extends 'frontend/base.html' %}

{% block title %}My Profile | HealthCare+{% endblock %}

{% block content %}
<div class="px-4 py-8">
    <div class="bg-gradient-to-r from-purple-600 to-primary text-white rounded-xl p-6 mb-8">
        <h1 class="text-3xl font-bold mb-2">
            <i class="fas fa-user-edit mr-3"></i>
            My Profile
        </h1>
        <p class="text-purple-100">Manage your account information and preferences</p>
    </div>
    
    <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
        <div class="bg-white rounded-xl shadow-lg p-6">
            <div class="text-center mb-6">
                <img src="https://ui-avatars.com/api/?name={{ user.first_name }}+{{ user.last_name }}&background=059669&color=fff&size=120" 
                     alt="Profile" class="w-24 h-24 rounded-full mx-auto mb-4">
                <h3 class="text-xl font-bold text-gray-800">{{ user.first_name }} {{ user.last_name }}</h3>
                <p class="text-primary font-semibold">{{ user.role|title }}</p>
                <p class="text-gray-600 text-sm">{{ user.email }}</p>
            </div>
            
            <div class="space-y-3">
                <div class="flex items-center text-sm text-gray-600">
                    <i class="fas fa-phone mr-3 text-primary"></i>
                    {{ user.phone_number|default:"Not provided" }}
                </div>
                <div class="flex items-center text-sm text-gray-600">
                    <i class="fas fa-birthday-cake mr-3 text-primary"></i>
                    {{ user.date_of_birth|default:"Not provided" }}
                </div>
                <div class="flex items-center text-sm text-gray-600">
                    <i class="fas fa-calendar mr-3 text-primary"></i>
                    Joined {{ user.created_at|date:"M Y" }}
                </div>
            </div>
        </div>
        
        <div class="lg:col-span-2">
            <div class="bg-white rounded-xl shadow-lg p-6">
                <h2 class="text-xl font-bold text-gray-800 mb-6">Profile Information</h2>
                
                <form method="POST" class="space-y-6">
                    {% csrf_token %}
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">First Name</label>
                            <input type="text" name="first_name" value="{{ user.first_name }}" 
                                   class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Last Name</label>
                            <input type="text" name="last_name" value="{{ user.last_name }}" 
                                   class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent">
                        </div>
                    </div>
                    
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Email Address</label>
                        <input type="email" value="{{ user.email }}" readonly
                               class="w-full px-4 py-2 border border-gray-300 rounded-lg bg-gray-100">
                    </div>
                    
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Phone Number</label>
                            <input type="tel" name="phone_number" value="{{ user.phone_number }}" 
                                   class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Date of Birth</label>
                            <input type="date" name="date_of_birth" value="{{ user.date_of_birth|date:'Y-m-d' }}" 
                                   class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent">
                        </div>
                    </div>
                    
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Address</label>
                        <textarea name="address" rows="3" 
                                  class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent">{{ user.address }}</textarea>
                    </div>
                    
                    {% if user.role == 'patient' %}
                        <div class="border-t pt-6">
                            <h3 class="text-lg font-bold text-gray-800 mb-4">Patient Information</h3>
                            
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Current Symptoms</label>
                                <textarea name="symptoms" rows="4" placeholder="Describe your current symptoms..."
                                          class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent">{{ patient.symptoms|default:'' }}</textarea>
                            </div>
                            
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Medical History</label>
                                <textarea name="medical_history" rows="3" placeholder="Previous medical conditions, surgeries, etc."
                                          class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent">{{ patient.medical_history|default:'' }}</textarea>
                            </div>
                            
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Allergies</label>
                                <textarea name="allergies" rows="2" placeholder="Any known allergies..."
                                          class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent">{{ patient.allergies|default:'' }}</textarea>
                            </div>
                            
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">Emergency Contact Name</label>
                                    <input type="text" name="emergency_contact_name" value="{{ patient.emergency_contact_name|default:'' }}" 
                                           class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent">
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">Emergency Contact Phone</label>
                                    <input type="tel" name="emergency_contact_phone" value="{{ patient.emergency_contact_phone|default:'' }}" 
                                           class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent">
                                </div>
                            </div>
                        </div>
                    {% elif user.role == 'doctor' %}
                        <div class="border-t pt-6">
                            <h3 class="text-lg font-bold text-gray-800 mb-4">Doctor Information</h3>
                            
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">Specialization</label>
                                    <input type="text" name="specialization" value="{{ doctor.specialization|default:'' }}" 
                                           placeholder="e.g., Cardiology, Pediatrics"
                                           class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent">
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">License Number</label>
                                    <input type="text" name="license_number" value="{{ doctor.license_number|default:'' }}" 
                                           class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent">
                                </div>
                            </div>
                            
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">Years of Experience</label>
                                    <input type="number" name="experience_years" value="{{ doctor.experience_years|default:'' }}" 
                                           class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent">
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">Consultation Fee ($)</label>
                                    <input type="number" name="consultation_fee" value="{{ doctor.consultation_fee|default:'' }}" 
                                           class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent">
                                </div>
                            </div>
                            
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Education</label>
                                <textarea name="education" rows="3" placeholder="Medical degree, certifications, etc."
                                          class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent">{{ doctor.education|default:'' }}</textarea>
                            </div>
                        </div>
                    {% endif %}
                    
                    <div class="flex space-x-4">
                        <button type="submit" class="bg-primary text-white px-6 py-2 rounded-lg hover:bg-green-700 transition-colors">
                            <i class="fas fa-save mr-2"></i>Save Changes
                        </button>
                        <a href="{% url 'frontend:dashboard' %}" class="bg-gray-500 text-white px-6 py-2 rounded-lg hover:bg-gray-600 transition-colors">
                            <i class="fas fa-times mr-2"></i>Cancel
                        </a>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>
{% endblock %}